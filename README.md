<p align="center">
  <svg height="14.018" viewBox="0 0 100 14.018" width="100" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="clip-path"><rect width="100" height="14.018" fill="none"></rect></clipPath></defs><g clip-path="url(#clip-path)" data-name="Vector Smart Object" id="Vector_Smart_Object" transform="translate(0 0)"><g id="Vector_Smart_Object-2" data-name="Vector Smart Object" transform="translate(50 7.009)"><g clip-path="url(#clip-path)" data-name="Vector Smart Object" id="Vector_Smart_Object-3" transform="translate(-50 -7.009)"><path d="M322.16,7.74H319.4V4.04h2.8c.58.02,1.94.06,1.94,1.82,0,1.18-.66,1.82-1.98,1.88m2.42,1.56a3.28,3.28,0,0,0,2.44-3.38,4.2,4.2,0,0,0-.96-2.76c-1.12-1.22-2.72-1.24-4.02-1.26H316.5V14.4h2.9V9.84h2.18l2.5,4.56h3.18l-2.88-5.04Z" data-name="패스 1360" fill="#6d6c6c" id="패스_1360" transform="translate(-253.2 -1.52)"></path><path d="M129.62,10.8c-2.02,0-3.34-1.66-3.34-4.24,0-1.9.8-3.98,3.08-4.12h.18a3.068,3.068,0,0,1,2.62,1.38,5.5,5.5,0,0,1,.74,2.76c0,1.96-.86,4.22-3.28,4.22m4.86-.02.1-.14a7.38,7.38,0,0,0,1.2-4.12,6.82,6.82,0,0,0-1.66-4.58A6.033,6.033,0,0,0,129.52,0a5.731,5.731,0,0,0-4.48,1.92,6.777,6.777,0,0,0-1.64,4.66,7.135,7.135,0,0,0,1.84,4.98,6.26,6.26,0,0,0,4.32,1.68,6.371,6.371,0,0,0,3.08-.86l.1-.04.08.06a6.3,6.3,0,0,0,3.28,1.62l.8-2.02a3.861,3.861,0,0,1-2.32-1.12Z" data-name="패스 1361" fill="#6d6c6c" id="패스_1361" transform="translate(-98.72)"></path><path d="M71.94,6.18a25.153,25.153,0,0,0-3.82-.76c-.56-.08-1.72-.24-1.72-1.32,0-.7.7-1.46,2-1.46a4.62,4.62,0,0,1,2.12.58,5.68,5.68,0,0,1,1.2.98l2.1-1.52A7.4,7.4,0,0,0,68.46.4a5.962,5.962,0,0,0-3.26.88,3.584,3.584,0,0,0-1.66,3.24,2.94,2.94,0,0,0,1.34,2.6,5.48,5.48,0,0,0,1.94.74c.66.14,1.36.24,2.04.32h.04c.9.12,2.28.32,2.28,1.42s-1.04,1.6-2.44,1.6a5.24,5.24,0,0,1-2.48-.64,3.94,3.94,0,0,1-1.18-.94l-2.18,1.4a6.576,6.576,0,0,0,5.54,2.42c2.12,0,3.68-.56,4.62-1.68a4.12,4.12,0,0,0,.96-2.62,3.014,3.014,0,0,0-2.1-3" data-name="패스 1362" fill="#6d6c6c" id="패스_1362" transform="translate(-50.32 -0.32)"></path><path d="M202.365,9.7c-.02,1.06-.04,2.6-2.28,2.6a2.45,2.45,0,0,1-2.14-.92,3.456,3.456,0,0,1-.26-1.66V1.9h-2.9v7c-.02,1.64-.04,3.88,2.34,5.12a6.5,6.5,0,0,0,2.86.68c.54,0,3.26-.1,4.58-2.26a6.726,6.726,0,0,0,.72-3.54v-7h-2.92Z" data-name="패스 1363" fill="#6d6c6c" id="패스_1363" transform="translate(-155.825 -1.52)"></path><path d="M253.98,1.9,249.4,14.4h2.82l1.6-4.98c.14-.44.4-1.2.66-2l.86-2.58h.28V5l1.54,4.4,1.64,5.02h2.78L257.08,1.9Z" data-name="패스 1364" fill="#6d6c6c" id="패스_1364" transform="translate(-199.52 -1.52)"></path><path d="M387.84,4.12V1.9H378.8V14.4h9.02V12.14H381.7V9.16h6.14V7H381.7V4.12Z" data-name="패스 1365" fill="#6d6c6c" id="패스_1365" transform="translate(-303.04 -1.52)"></path><path d="M7.3,6.84a.4.4,0,0,1-.4-.14L6.36,6H3.2l5.1,7.2h3.22L8.92,9.48a.272.272,0,0,1,.1-.38h.06a4.68,4.68,0,0,0,.88-.7,4.94,4.94,0,0,0,1-1.48,4.18,4.18,0,0,0,.28-.86,1.351,1.351,0,0,0,.04-.28,5.96,5.96,0,0,0,.04-.68,5.84,5.84,0,0,0-.04-.66,1.569,1.569,0,0,1-.04-.28,4.12,4.12,0,0,0-.28-.88,4.94,4.94,0,0,0-1-1.48A4.64,4.64,0,0,0,8.5.8,4.32,4.32,0,0,0,6.76.4H0V13.2H2.68V3.4a.26.26,0,0,1,.28-.28H6.18a3.8,3.8,0,0,1,.96.12,2.02,2.02,0,0,1,.88.44,1.78,1.78,0,0,1,.62,1.36,1.8,1.8,0,0,1-.62,1.4,1.94,1.94,0,0,1-.72.4" data-name="패스 1366" fill="#c7161d" id="패스_1366" transform="translate(0 -0.32)"></path><path d="M437.5,1.9V7.1h7.3v7.3H450V1.9Z" data-name="패스 1367" fill="#c7161d" id="패스_1367" transform="translate(-350 -1.52)"></path><rect data-name="사각형 2091" fill="#9e9e9f" height="6.104" id="사각형_2091" transform="translate(87.5 6.78)" width="6.1"></rect></g></g></g></svg>
</p>
<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="15" alt="Nest Logo" /></a> RSQUARE BFF<a href="https://www.mobilelive.ca/blog/why-backend-for-frontend-application-architecture" target="_blank">(Backend For Frontend)</a> For Global RTB
</p>

## Description

Global RTB 에 대응하기 위한 BFF

## Installation

```bash
$ npm install
```

## Running the app

```bash
# development
$ npm run start

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```

## Build

```bash
$ npm run build
```

## Test

```bash
# unit tests
$ npm run test

# e2e tests
$ npm run test:e2e

# test coverage
$ npm run test:cov
```

## Codegen

```bash
$ npm run rcodegen:rfind
```

### rcodegen (by RSQUARE)
- OpenApi 스펙을 nestjs 에 맞춰서 API 코드를 생성
- 현재 OpenApi 3.0 만 지원
- axios 베이스

## Project Structure
```
├ build
|    ├ codegen //rcodegen 빌드 스크립트
├ src
|    ├ apis    //호출 타겟 서버별 api
|    |    ├ (가칭 rtb-xxx)
|    |    ├ (가칭 rtb-yyy)
|    |    ├ . . .
|    ├ common  // 프로젝트 공통
|    |    ├ axios  //axios 셋업. request/response 전후처리 (토큰, 공통 예외처리 등..)
|    |    ├ header //공통 header 관련
|    |    ├ util   //유틸
|    ├ modules // nest 모듈 (중계 대상의 성격별 controller 모음)
|    |    ├ core // 서버의 기본 공통 api (버전, health check 등...)
|    |    ├ (가칭 rtb-collect-info-common)
|    |    ├ (가칭 rtb-collect-info-pc)
|    |    ├ (가칭 rtb-collect-info-mobile)
|    |    ├ . . .
|    ├ nest  // nest 관련 요소의 모음
|    |    ├ dev
|    |    |    ├ base (개발 베이스 클래스 모음)
|    |    ├ guards (nest guard)
|    |    ├ interceptors (nest interceptor)
|    . . .
|    app.module.ts  // root module (application 최상단 모듈)
|    main.ts        // nest main entry point
├ test

codegen.option.json   //codegen option (for openapi-generator)
Dockerfile            //docker image
nest-cli.json         //nest 설정
openapitools.json     //openapi-generator config
package-lock.json
package.json
pm2.config.js         //pm2 config (cluster 모드)
rcodegen.config.json  //rcodegen 용 config
README.md
tsconfig.build.json   //nest build 용 tsconfig
tsconfig.json
webpack-hmr.config.js //HMR 지원버전 webpack config
webpack.config.js     //nest build 시 사용되는 webpack config
```
